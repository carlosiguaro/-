(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{132:function(e,t,n){},182:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"auth",(function(){return b})),n.d(a,"authenticated",(function(){return h}));var s={};n.r(s),n.d(s,"roles",(function(){return O}));var c=n(0),r=n(54),i=n.n(r),l=n(40),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,204)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))},d=n(10),j=n(11),u=n(140);function b(){var e={next:!1};return localStorage.getItem("token")&&(e.next=!0),e}function h(){var e={next:!1};return e.next=!localStorage.getItem("token"),e}var m={next:!1};function O(e){return!0===e.hasOwnProperty("user")&&!0===e.user.hasOwnProperty("token")&&e.user.token.length>0&&(m.next=!0),m}var x=Object(j.a)(Object(j.a)({},a),s),f=n(2);var g=function(){return Object(f.jsx)("div",{className:"container-fluid min-vh-100 d-flex justify-content-center align-items-center",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"400"})}),Object(f.jsx)("div",{className:"d-flex align-items-center mx-3",children:Object(f.jsx)("label",{children:"BadRequest"})})]})})};var v=function(){return Object(f.jsx)("div",{className:"container-fluid min-vh-100 d-flex justify-content-center align-items-center",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"401"})}),Object(f.jsx)("div",{className:"d-flex align-items-center mx-3",children:Object(f.jsx)("label",{children:"Unauthorized"})})]})})};var p=function(){return Object(f.jsx)("div",{className:"container-fluid min-vh-100 d-flex justify-content-center align-items-center",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"403"})}),Object(f.jsx)("div",{className:"d-flex align-items-center mx-3",children:Object(f.jsx)("label",{children:"Forbidden"})})]})})};var y=function(){return Object(f.jsx)("div",{className:"container-fluid min-vh-100 d-flex justify-content-center align-items-center",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"404"})}),Object(f.jsx)("div",{className:"d-flex align-items-center mx-3",children:Object(f.jsx)("label",{children:"Not Found"})})]})})},N=function(e){var t,n=e.store,a=e.component,s=e.path,c=e.middlewares,r=Object(u.a)(e,["store","component","path","middlewares"]),i=a;if("function"===typeof a){if(Array.isArray(c)&&c.length>0){n=n||{};for(var l=0;l<c.length;l++)if("string"===typeof c[l]){if(!x.hasOwnProperty(c[l])){i=g;break}(t=x[c[l]](n)).next||(i=401===t.status?v:(t.status,p))}}}else i=g;return Object(f.jsx)(d.a,Object(j.a)({path:s,component:i},r))},w=n(35),S=n(203),k=n(198),C=n(79),M=n(201),A=n(202),I=n(137),R=n.n(I),F=function(){localStorage.removeItem("token")};var L=function(){var e=Object(d.f)();Object(c.useEffect)((function(){localStorage.getItem("token")&&e.push("/home")}),[]);var t=Object(c.useState)({loading:!1,validationMsg:{username:null,password:null},username:"",password:"",authMsg:""}),n=Object(w.a)(t,2),a=n[0],s=n[1],r=function(t){var n;l()&&(s(Object(j.a)(Object(j.a)({},a),{},{loading:!0})),(n={username:a.username,password:a.password},R.a.post("https://webhooks.multifiber.cl/api/v1/auth/obtain_token/",Object(j.a)({},n))).then((function(t){var n;t.data.token&&(n=t.data.token,localStorage.setItem("token",n),e.push("/home"))})).catch((function(e){try{e.response.data&&(e.response.data.non_field_errors?s(Object(j.a)(Object(j.a)({},a),{},{authMsg:"Nombre de usuario o contrase\xf1a incorrecta"})):s(Object(j.a)(Object(j.a)({},a),{},{authMsg:"Error desconocido"})))}catch(e){s(Object(j.a)(Object(j.a)({},a),{},{authMsg:"Error desconocido"}))}})))},i=function(e){var t={validationMsg:Object(j.a)({},a.validationMsg)};a.authMsg.length>0&&(t=Object(j.a)(Object(j.a)({},t),{},{authMsg:""})),"username"==e.target.name?(t.username=e.target.value,null!==a.validationMsg.username&&(t.validationMsg.username=null)):(t.password=e.target.value,null!==a.validationMsg.password&&(t.validationMsg.password=null)),s(Object(j.a)(Object(j.a)({},a),t))},l=function(){var e=!0,t={username:null,password:null};return 0===a.username.length&&(t.username="El nombre de usuario es requerido",e=!1),0===a.password.length&&(t.password="La contrase\xf1a es requerida",e=!1),s(Object(j.a)(Object(j.a)({},a),{},{validationMsg:Object(j.a)(Object(j.a)({},a.validationMsg),t)})),e};return Object(f.jsx)("div",{className:"container-fluid min-vh-100 d-flex justify-content-center align-items-center",children:Object(f.jsx)("div",{className:"row w-100 d-flex justify-content-center",children:Object(f.jsxs)("div",{className:"col-sm-12 col-md-8 col-lg-6 col-xl-4 p-4 bg-white rounded shadow",children:[Object(f.jsx)(S.a,{as:"h1",className:"text-center mb-4",children:"Acme inc."}),Object(f.jsxs)(k.a,{loading:a.loading,children:[Object(f.jsxs)(S.a,{as:"h4",children:[Object(f.jsx)(C.a,{name:"user circle"}),Object(f.jsx)(S.a.Content,{children:"Sign in"})]}),Object(f.jsx)(k.a.Field,{children:Object(f.jsx)(k.a.Input,{error:a.validationMsg.username,fluid:!0,label:"Nombre de usuario",id:"form-input-username",icon:"user",type:"text",name:"username",placeholder:"Nombre de usuario",onChange:function(e){return i(e)}})}),Object(f.jsx)(k.a.Field,{children:Object(f.jsx)(k.a.Input,{error:a.validationMsg.password,fluid:!0,label:"Contrase\xf1a",id:"form-input-password",icon:"lock",type:"password",name:"password",placeholder:"Contrase\xf1a",onChange:function(e){return i(e)}})}),a.authMsg&&Object(f.jsx)(M.a,{error:!0,className:"d-block",content:a.authMsg}),Object(f.jsx)(A.a,{fluid:!0,onClick:function(e){return r()},children:"Submit"})]})]})})})},D=n(197),E=function(){var e=localStorage.getItem("dashboardurls");return e?JSON.parse(e).urls:[]};n(182),n(132);var T=function(){var e=Object(d.f)(),t=Object(c.useState)("dash-column"),n=Object(w.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),i=Object(w.a)(r,2),o=i[0],j=i[1];return Object(c.useEffect)((function(){j(E())}),[]),Object(f.jsxs)("div",{className:"min-vh-100 container cont-pp",children:[Object(f.jsxs)(S.a,{as:"h1",className:"py-5 m-0",children:[Object(f.jsx)(C.a,{name:"industry"}),Object(f.jsxs)(S.a.Content,{children:["Acme",Object(f.jsx)(S.a.Subheader,{children:"Home"})]})]}),Object(f.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{className:"d-flex align-items-center",children:Object(f.jsx)(l.b,{to:"/manage-dashboard",className:"mx-4",children:"Registrar Dashboard"})}),Object(f.jsx)("div",{children:Object(f.jsx)(D.a,{text:"Vista:",icon:"sliders horizontal",floating:!0,labeled:!0,button:!0,className:"icon",children:Object(f.jsx)(D.a.Menu,{onClick:function(e){return function(e){var t=e.target,n=e.target.nodeName,a=e.target.nodeName;switch(n){case"DIV":a=t.querySelector("span");break;case"SPAN":a=t;break;case"I":a=t.nextSibling}var c,r=a.textContent;"Columna"==r?c="dash-column":"Tabla"==r&&(c="dash-table"),s(c)}(e)},children:[{text:"Columna",icon:"columns"},{text:"Tabla",icon:"table"}].map((function(e,t){return Object(f.jsx)(D.a.Item,{icon:e.icon,text:e.text},t)}))})})}),Object(f.jsx)("div",{className:"d-flex align-items-center result-view",children:"dash-column"===a?Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)(C.a,{name:"columns"})," Columna"]}):Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)(C.a,{name:"table"})," Tabla"]})})]}),Object(f.jsx)("div",{className:"session-destroy",children:Object(f.jsx)(A.a,{icon:!0,onClick:function(t){F(),setTimeout((function(){e.push("/")}),200)},children:Object(f.jsx)(C.a,{name:"sign-out alternate"})})})]}),Object(f.jsx)("h2",{className:"my-2",children:"Dassboard List"}),Object(f.jsxs)("div",{className:a,children:[o&&Object(f.jsx)(c.Fragment,{children:o.map((function(e,t){return Object(f.jsx)("div",{children:Object(f.jsx)("iframe",{src:e},t)})}))}),!o.length&&Object(f.jsx)("label",{children:"No existen dashboard registrados"})]})]})},U=n(199);var q={Sigin:L,Home:T,RegisterDashboard:function(){var e=Object(c.useState)(""),t=Object(w.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(w.a)(s,2),i=r[0],o=r[1],j=Object(c.useState)(null),u=Object(w.a)(j,2),b=u[0],h=u[1],m=Object(c.useState)([]),O=Object(w.a)(m,2),x=O[0],g=O[1],v=Object(d.f)();Object(c.useEffect)((function(){g(E())}),[]);var p=function(e){y()&&(o(!0),function(e){var t=localStorage.getItem("dashboardurls"),n=!0;if(t){var a=JSON.parse(t),s=!1;for(var c in a.urls)a.urls[c]==e&&(s=!0);return s?n=!1:(a.urls.push(e),localStorage.setItem("dashboardurls",JSON.stringify(a))),n}localStorage.setItem("dashboardurls",'{"urls": ["'+e+'"] }')}(n)&&setTimeout((function(){o(!1),g(E()),a(""),document.querySelector("input[name='URL']").value=""}),1e3))},y=function(){var e=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/gi),t=!0;return n.length?n.match(e)||(h("Ingrese una url valida"),t=!1):(h("La url es requerida"),t=!1),t};return Object(f.jsxs)("div",{className:"min-vh-100 container cont-pp",children:[Object(f.jsxs)(S.a,{as:"h1",className:"py-5 m-0",children:[Object(f.jsx)(C.a,{name:"industry"}),Object(f.jsxs)(S.a.Content,{children:["Acme",Object(f.jsx)(S.a.Subheader,{children:"Dashboard Manager"})]})]}),Object(f.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(f.jsx)("div",{className:"d-flex align-items-center",children:Object(f.jsx)(l.b,{to:"/home",className:"mx-4",children:"Home"})}),Object(f.jsx)("div",{className:"session-destroy",children:Object(f.jsx)(A.a,{icon:!0,onClick:function(e){F(),setTimeout((function(){v.push("/")}),200)},children:Object(f.jsx)(C.a,{name:"sign-out alternate"})})})]}),Object(f.jsxs)(k.a,{loading:i,children:[Object(f.jsxs)(S.a,{as:"h4",children:[Object(f.jsx)(C.a,{name:"th large"}),Object(f.jsx)(S.a.Content,{children:"Registro de Dashboard"})]}),Object(f.jsx)(k.a.Field,{children:Object(f.jsx)(k.a.Input,{error:b,fluid:!0,label:"URL",id:"form-input-username",icon:"globe",type:"text",name:"URL",placeholder:"Ingrese URL",onChange:function(e){return function(e){b&&h(null),a(e.target.value)}(e)}})}),Object(f.jsx)(A.a,{fluid:!0,onClick:function(e){return p()},children:"Registrar dashboard"})]}),Object(f.jsx)("h2",{children:"Url registradas"}),Object(f.jsxs)(U.a,{celled:!0,fixed:!0,singleLine:!0,children:[Object(f.jsx)(U.a.Header,{children:Object(f.jsx)(U.a.Row,{children:Object(f.jsx)(U.a.HeaderCell,{children:"Url"})})}),Object(f.jsx)(U.a.Body,{children:x.map((function(e,t){return Object(f.jsx)(U.a.Row,{children:Object(f.jsx)(U.a.Cell,{children:e},t)})}))})]})]})}},H=Object.assign({set:function(e,t,n){var a,s,c;if("string"===typeof e)"function"===typeof t&&void 0===n?(a=e,s=t,c=[]):"string"===typeof t&&"function"===typeof n?(a=e,s=n,c=[t]):Array.isArray(t)&&"function"===typeof n&&(a=e,s=n,c=t),this.get.push({path:a,component:s,middlewares:c});else if(Array.isArray(e)&&Array.isArray(t))for(var r=0;r<t.length;r++)Array.isArray(t[r])&&2===t[r].length&&"string"===typeof t[r][0]&&"function"===typeof t[r][1]&&Array.isArray(e)&&this.get.push({path:t[r][0],component:t[r][1],middlewares:e})},get:[]});H.set("/",q.Sigin),H.set(["auth"],[["/home",q.Home],["/manage-dashboard",q.RegisterDashboard]]);var P=function(){return Object(f.jsx)("div",{children:Object(f.jsxs)(d.c,{children:[H.get.map((function(e,t){return Object(f.jsx)(N,{path:e.path,component:e.component,middlewares:e.middlewares,exact:!0},t)})),Object(f.jsx)(d.a,{path:"*",children:Object(f.jsx)(y,{})})]})})};n(183),n(184);i.a.render(Object(f.jsx)(l.a,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),o()}},[[185,1,2]]]);
//# sourceMappingURL=main.03603234.chunk.js.map